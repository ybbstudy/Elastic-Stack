# 多字段检索

```json
PUT product
{
  "mappings": {
    "properties": {
      "name": {
        "type": "text",
        "analyzer": "ik_max_word"
      },
      "desc":{
        "type": "text",
        "analyzer": "ik_max_word"
      }
    }
  }
}


PUT /product/_doc/1
{
  "name": "chiji shouji，游戏神器，super ",
  "desc": "基于TX深度定制，流畅游戏不发热，物理外挂，charge",
  "price": 3999,
  "createtime": "2020-05-20",
  "collected_num": 99,
  "tags": [
    "性价比",
    "发烧",
    "不卡"
  ]
}

PUT /product/_doc/2
{
  "name": "xiaomi NFC shouji",
  "desc": "支持全功能NFC,专业 chiji，charge",
  "price": 4999,
  "createtime": "2020-05-20",
  "collected_num": 299,
  "tags": [
    "性价比",
    "发烧",
    "公交卡"
  ]
}

PUT /product/_doc/3
{
  "name": "NFC shouji，super ",
  "desc": "shouji 中的轰炸机",
  "price": 2999,
  "createtime": "2020-05-20",
  "collected_num": 1299,
  "tags": [
    "性价比",
    "发烧",
    "门禁卡"
  ]
}
GET /product/_search
PUT /product/_doc/4
{
  "name": "xiaomi 耳机",
  "desc": "耳机中的黄焖鸡",
  "price": 999,
  "createtime": "2020-05-20",
  "collected_num": 9,
  "tags": [
    "低调",
    "防水",
    "音质好"
  ]
}

PUT /product/_doc/5
{
  "name": "红米耳机",
  "desc": "耳机中的肯德基",
  "price": 399,
  "createtime": "2020-05-20",
  "collected_num": 0,
  "tags": [
    "牛逼",
    "续航长",
    "质量好"
  ]
}

# _source
GET product/_search
{
  "_source": false, 
  "from": 0,
  "size": 10, 
  "query": {
    "match_all": {}
  }
}

GET product/_mapping
GET product/_search


GET _analyze
{
  "analyzer": "ik_max_word",
  "text": ["xiaomi NFC shouji msb tech"]
}
GET product/_search
{
  "query": {
    "match_phrase": {
      "name": "NFC shouji msb"
    }
  }
}

GET product/_search
GET product/_search
{
  "from": 0,
  "size": 20, 
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "price": {
        "order": "asc"
      }
    },
    {
      "_score": {
        "order": "desc"
      }
    }
  ]
}

GET product/_mapping
GET product/_search
{
  "query": {
    "term": {
      "name": "xiaomi"
    }
  },
  "highlight": {
    "fields": {
      "name": {
        "pre_tags": [
          "<b>"
        ],
        "post_tags": [
          "</b>"
        ]
      }
    }
  }
}



PUT /product2/_doc/1
{
    "name" : "xiaomi phone",
    "desc" :  "shouji zhong de zhandouji",
    "date": "2021-06-01",
    "price" :  3999,
    "tags": [ "xingjiabi", "fashao", "buka" ]
}
PUT /product2/_doc/2
{
    "name" : "xiaomi nfc phone",
    "desc" :  "zhichi quangongneng nfc,shouji zhong de jianjiji",
    "date": "2021-06-02",
    "price" :  4999,
    "tags": [ "xingjiabi", "fashao", "gongjiaoka" ]
}

GET product2/_search

GET _cat/indices
GET product2/_mapping
GET product2/_search
{
  "query": {
    "term": {
      "name.keyword": "xiaomi phone"
    }
  }
}

# where tags in ("xingjiabi","gongjiaoka")
GET product2/_search
{
  "query": {
    "terms": {
      "tags": ["xingjiabi","gongjiaoka"]
    }
  }
}


GET product/_search
{
  "query": {
    "range": {
      "price": {
        "gte": 4000,
        "lte": 5000
      }
    }
  }
}
GET product2/_search
{
  "query": {
    "match": {
      "name": "xiaomi phone"
    }
  }
}

GET product2/_search
{
  "query": {
    "constant_score": {
      "filter": {
        "term": {
          "name.keyword": "xiaomi phone"
        }
      }
    }
  }
}
GET product/_search
GET product/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match_phrase": {
            "name": "chiji shouji"
          }
        }
      ],
      "should": [
        {
          "match_phrase": {
            "name": "msb tech"
          }
        }
      ],
      "minimum_should_match": 1
    }
  }
}
GET product/_search
{
  "query": {
    "bool": {
      "must_not": [
        {
          "match_phrase": {
            "name": "msb tech"
          }
        }
      ]
    }
  }
}

# most_fields ★ 
# 评分计算规则 ☆  有时间看看，没时间过
GET product/_search
GET product/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "match": {
            "name": "chiji shouji"
          }
        },
        {
          "match": {
            "desc": "chiji shouji"
          }
        }
      ]
    }
  }
}
GET product/_search
{
  "query": {
    "multi_match": {
      "query": "chiji shouji",
      "type": "most_fields",
      "fields": [
        "name",
        "desc"
      ]
    }
  }
}

# 默认 best_fields ★ 
GET product/_search
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "name": "chiji shouji" }},
        { "match": { "desc": "chiji shouji" }}
      ]
    }
  }
}
# tie_breaker": 其他字段的权重值 ★
GET product/_search
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "name": "super charge" }},
        { "match": { "desc": "super charge" }}
      ]
    }
  }
}

GET product/_search
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "name": "super charge" }},
        { "match": { "desc": "super charge" }}
      ],
      "tie_breaker": 0.3,
      "boost": 2
    }
  }
}
GET product/_search
{
  "query": {
    "multi_match" : {
      "query":      "super charge",
      "type":       "best_fields", // 默认
      "fields":     [ "name^2", "desc" ],
      "tie_breaker": 0.3
    }
  }
}

#控制匹配精度 
GET product/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "match": {
            "name": {
              "query": "xiaomi shouji",
              "minimum_should_match": "100%"
            }
          }
        }
      ]
    }
  }
}
GET product/_search
{
  "query": {
    "bool": {
      "should": [
        {"match": {"name": "xiaomi "}},
        {"match": {"name": "shouji"}}
      ],
      "minimum_should_match": "50%"
    }
  }
}
# 略
GET product/_search
{
    "query": {
        "dis_max": {
            "queries": [
                {
                  "match": {
                    "name": {
                      "query": "super charge",
                      "minimum_should_match": "50%",
                      "boost": 2
                    }
                  }
                },
                {
                  "match": {
                    "desc":{
                      "query": "super charge",
                      "minimum_should_match": "50%",
                      "boost": 1
                    }
                  }
                }
            ],
            "tie_breaker": 0.7
        }
    }
}

GET product/_search
{
    "query": {
        "dis_max": {
            "queries": [
                {
                  "match": {
                    "name": {
                      "query": "super charge",
                      "minimum_should_match": "50%",
                      "boost": 2
                    }
                  }
                },
                {
                  "match": {
                    "desc":{
                      "query": "super charge",
                      "minimum_should_match": "50%",
                      "boost": 1
                    }
                  }
                }
            ],
            "tie_breaker": 0.7
        }
    }
}

# cross_fields ?
POST /teacher/_bulk
{ "index": { "_id": "1"} }
{ "name" : {"姓" : "吴", "名" : "磊"} }
{ "index": { "_id": "2"} }	
{ "name" : {"姓" : "连", "名" : "鹏鹏"} }
{ "index": { "_id": "3"} }
{ "name" : { "姓" : "张","名" : "明明"} }
{ "index": { "_id": "4"} }
{ "name" : { "姓" : "周","名" : "志志"} }
{ "index": { "_id": "5"} }
{ "name" : {"姓" : "吴", "名" : "亦凡"} }
{ "index": { "_id": "6"} }
{ "name" : {"姓" : "吴", "名" : "京"} }
{ "index": { "_id": "7"} }
{ "name" : {"姓" : "吴", "名" : "彦祖"} }
{ "index": { "_id": "8"} }
{ "name" : {"姓" : "帅", "名" : "吴"} }
{ "index": { "_id": "9"} }
{ "name" : {"姓" : "连", "名" : "磊"} }
{ "index": { "_id": "10"} }
{ "name" : {"姓" : "周", "名" : "磊"} }
{ "index": { "_id": "11"} }
{ "name" : {"姓" : "张", "名" : "磊"} }
{ "index": { "_id": "12"} }
{ "name" : {"姓" : "马", "名" : "磊"} }
#{ "index": { "_id": "13"} }
#{ "name" : {"姓" : "诸葛", "名" : "吴磊"} }

GET teacher/_mapping
# standard
GET _analyze
{
  "analyzer": "standard",
  "text": ["吴 磊"]
}
GET teacher/_search
{
  "query": {
    "multi_match": {
      "query": "吴 磊",
      "type": "most_fields",
      "fields": [
        "name.姓",
        "name.名"
      ]
    }
  }
}


# 吴 必须包含在 name.姓 或者 name.名 里
# 并且
# 磊 必须包含在 name.姓 或者 name.名 里
GET teacher/_search
{
  "query": {
    "multi_match" : {
      "query":      "吴磊",
      "type":       "cross_fields",
      "fields":     [ "name.姓", "name.名" ],
      "operator":   "or"
    }
  }
}

```

# 搜索模板

```json

# 创建搜索模板
PUT _scripts/my-search-template
{
  "script": {
    "lang": "mustache",
    "source": {
      "query": {
        "match": {
          "message": "{{query_string}}"
        }
      },
      "from": "{{from}}",
      "size": "{{size}}"
    },
    "params": {
      "query_string": "nfc phone"
    }
  }
}
# 验证使用模板
POST _render/template
{
  "id": "my-search-template",
  "params": {
    "query_string": "nfc phone",
    "from": 20,
    "size": 10
  }
}

# 使用搜索模板
GET product/_search/template
{
  "id":"my-search-template",
  "params": {
    "query_string":"nfc phone",
    "from":0,
    "size":10
  }
}
## 案例 Elastic认证考试原题
# 写入search template，名字为ser_tem_1
# 根据search template写出对应的match query，有my_field、my_value、size字段
# 通过参数来调用这个search template
# 这个search template运用到kibana_sample_data_flights中
# my_field是DestCountry，而my_value是CN，size为5.
POST _scripts/ser_temp_1
{
    "script": {
    "lang": "mustache",
    "source": {
      "query": {
        "match": {
          "{{my_field}}": "{{my_value}}"
        }
      },
      "size": "{{my_size}}"
    }
  }
}
GET kibana_sample_data_flights/_search/template
{
  "id":"ser_temp_1",
  "params": {
    "my_field":"DestCountry",
    "my_value":"CN",
    "my_size":5
  }
}
# 同时运行多个搜索模板
GET product,kibana_sample_data_flights/_msearch/template
{}
{"id":"my-search-template","params":{"query_string":"nfc","from":0,"size":10}}
{}
{"id":"ser_temp_1","params":{"my_field":"DestCountry","my_value":"CN","my_size":5}}

GET _scripts/my-search-template
GET _cluster/state/metadata?pretty&filter_path=metadata
#
DELETE _scripts/my-search-template
#设置默认值
PUT _scripts/default-template
{
  "script":{
    "lang":"mustache",
    "source": {
      "query":{
        "range":{
          "createtime":{
            "gte":"{{startdate}}",
            "lte":"{{enddate}}{{^enddate}}now/d{{/enddate}}"
          }
        }
      }
    }
  }
}
GET product/_search/template
{
  "id":"default-template",
  "params": {
    "startdate":"2020-05-01"
  }
}

```



# Term Vector

```json
DELETE term_vector_index
GET term_vector_index/_mapping
PUT term_vector_index
{
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "term_vector": "with_positions_offsets_payloads"
      }
    }
  }
}
PUT term_vector_index/_doc/1
{
  "text": "you can kill me but can't kuck me",
  "desc": "test test test"
}
PUT term_vector_index/_doc/2
{
  "text": "a big house bling bling me",
  "desc": "test2 test2 test2"
}
PUT term_vector_index/_doc/3
{
  "text" : "one day is your teacher,day day is your father"
}
PUT term_vector_index/_doc/4
{
  "text" : "good good study, day day up"
}
GET term_vector_index/_settings
GET term_vector_index/_search
GET term_vector_index/_doc/2
# 1: 9
# 2: 8
# 3: 12
# 4: 9
GET term_vector_index/_termvectors/1
{
  "fields": ["text"],
  "offsets": true,
  "payloads": true,
  "positions": true,
  "term_statistics": true,
  "field_statistics": true
}

POST _bulk
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强买了一顶帽子颜色特别好看，我感觉特别帅","content":"宝强买了一顶帽子颜色特别好看，我感觉特别帅。吧啦吧啦吧啦。。。"}
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强哥有两个孩子，一个和楼上长得特别像，一个和楼下长得特别像","content":"宝强哥有两个孩子，一个和楼上长得特别像，一个和楼下长得特别像。吧啦吧啦吧啦。。。"}
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强哥的钱被人卷走了，骗子是在太可恶了","content":"宝强买了一顶帽子颜色特别好看，我感觉特别帅。吧啦吧啦吧啦。。。"}

GET hightlight_index/_search
{
  "query": {
    "match": {
      "title": "宝强"
    }
  },
  "highlight": {
    "fields": {
      "title": {},
      "content": {}
    }
  }
}
GET hightlight_index/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "match": {
            "title": "宝强"
          }
        },
        {
          "match": {
            "content": "宝强"
          }
        }
      ]
    }
  }
}
GET hightlight_index/_search
{
  "query": {
    "multi_match": {
      "query": "宝强",
      "type": "most_fields",
      "fields": [
        "title",
        "content"
      ]
    }
  }
}
```

# 高亮查询

```json
#高亮查询
## 用法
POST _bulk
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强买了一顶帽子颜色特别好看，我感觉特别帅","content":"宝强买了一顶帽子颜色特别好看，我感觉特别帅。吧啦吧啦吧啦。。。"}
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强哥有两个孩子，一个和楼上长得特别像，一个和楼下长得特别像","content":"宝强哥有两个孩子，一个和楼上长得特别像，一个和楼下长得特别像。吧啦吧啦吧啦。。。"}
{"index":{"_index":"hightlight_index","_id":1}}
{"title":"宝强哥的钱被人卷走了，骗子是在太可恶了","content":"宝强买了一顶帽子颜色特别好看，我感觉特别帅。吧啦吧啦吧啦。。。"}

GET hightlight_index/_search
{
  "query": {
    "match": {
      "title": "宝强"
    }
  },
  "highlight": {
    "fields": {
      "title": {}
    }
  }
}
## 三种选择器
GET hightlight_index/_search
{
  "query": {
    "match": {
      "title": "宝强"
    }
  },
  "highlight": {
    "fields": {
      "title": {
        "type":"plain"
      }
    }
  }
}
## 多字段高亮
GET hightlight_index/_search
{
  "query": {
    "match": {
      "title": "宝强"
    }
  },
  "highlight": {
    "fields": {
      "title": {},
      "content": {}
    }
  }
}
GET hightlight_index/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "match": {
            "title": "宝强"
          }
        },
        {
          "match": {
            "content": "宝强"
          }
        }
      ]
    }
  },
  "highlight": {
    "fields": {
      "title": {},
      "content": {}
    }
  }
}
GET hightlight_index/_search
{
  "query": {
    "multi_match": {
      "query": "宝强",
      "type": "most_fields",
      "fields": [
        "title",
        "content"
      ]
    }
  },
  "highlight": {
    "fields": {
      "title": {},
      "content": {}
    }
  }
}
## 高亮设置的作用域
GET hightlight_index/_search
{
  "query": {
    "multi_match": {
      "query": "宝强",
      "type": "most_fields",
      "fields": [
        "title",
        "content"
      ]
    }
  }
}
## 生产环境中的一个常见问题
DELETE long_text_hight_index
PUT long_text_hight_index
{
  "mappings": {
    "properties": {
      "caseContext": {
        "type": "text",
        "analyzer": "ik_max_word", 
        "fields": {
          "keyword": {
            "type": "keyword",
            "ignore_above": 256
          }
        }
      }
    }
  }
}
PUT long_text_hight_index/_doc/1
{
  "caseContext" : """
浙江省苍南县人民法院
民事判决书
（2020）浙0327民初5117号
原告：郑有喜，男，1971年10月1日出生，汉族，公民身份号码：330327197110013932，住浙江省苍南县灵溪镇东仓村。
被告：黄小眉，女，1975年10月8日出生，汉族，公民身份号码：330327197510080042，住浙江省苍南县灵溪镇东仓村。
原告郑有喜诉被告黄小眉离婚后财产纠纷一案，本院于2020年9月17日立案受理后，依法适用简易程序于2020年10月13日公开开庭进行了审理。原告郑有喜、被告黄小眉到庭参加诉讼。本案现已审理终结。
原告郑有喜向本院提出诉讼请求：1.原告已经支付退房租金8000元、物业费500元、押金3000元、中介费2000元，合计13500元，被告支付给原告6750元；2.原告已经支付的借款利息及其他费用14680元，被告支付给原告7340元；3.本案诉讼费由被告承担。事实与理由：原、被告于1996年1月26日登记结婚，于2020年3月30日协议离婚。离婚协议书约定，原、被告共有的杭州市淳安县千岛湖镇明珠花园86幢2单元506室双方各50%份额，以145万元转让他人，除去共同债务60万元，剩余85万元共同平分。但该房屋在双方达成离婚协议书时存在与他人租赁关系未到期、物业费、租客押金、出售房屋中介费、贷款60万元偿还产生的利息及费用均未约定处理。但上述费用均为夫妻共同债务。即：为偿还银行共同贷款60万元，原告于2020年 3月15日向李小红借款32万元用于偿还贷款，但李小红于2020年 3月24日就申请法院将原、被告上述房产查封保全，导致房产无法出售，直至4月下旬，通过中介将房产出售。原告偿还上述借款32万元支付利息3778元、保险公司保函费752元、保全费2150元、律师费5000元，其他费用3000元等合计14680元。房产转让后退还房客租金8000元、物业费500元、押金3000元、中介费2000元合计13500元。两项共计28180元，该费用系婚姻存续期间的财产处置所产生的费用，离婚后原告先行支付，被告应当承担14090元，请求法院支持原告的诉讼请求。
被告黄小眉辩称：关于解除房屋租赁所产生的费用的问题。原告说房屋没有出租，现在说把房屋委托中介出租，但租金的收入多少也没有告诉我。因此，解除房屋租赁所产生费用我不清楚，只有中介费用2000元是事实，依离婚协议约定是所有债务全部清偿后原告转给我42.5万元，所以原告诉称的解除房屋租赁关系产生的费用被告不需要承担。关于李小红借款的问题。原告说是向杭州一个朋友周转32万元，现诉称于2020年3月15日向李小红借款32万元，但是借条是3月1日与原告诉称的时间对不上，说明借条是假的。根据离婚协议约定所有各自经手的债务各自偿还，原告所谓借款产生的费用，根据离婚协议约定被告也是不需要承担。请求法院驳回原告的诉讼请求。
本院经审理，认定事实如下：原、被告于2020年3月30日协议离婚。《离婚协议书》第三条约定：甲方（原告）与乙方（被告）夫妻共同财产分割如下：1.甲、乙双方共同所有的坐落于杭州市淳安县千岛湖镇明珠花园86幢2单元506室房屋一间，同意离婚后转让所得的款项各分50%份额。该房屋以145万元转让给他人，甲方已找到买家，离婚登记手续办理完毕后，乙方在15天内配合乙方到房产所在地的不动产登记中心办理过户登记变更手续。在转让款中，除去以下共同债务60万，剩余85万元由甲乙双方共同平分。甲方必须将其中的42.5万元汇到乙方名下，乙方方可签字(或卖方保证能够将42.5万元汇到乙方名下，乙方才予以签名办理过户手续。)……　4.夫妻双方其他各自名下财产归各自所有。第四条约定：夫妻共同债务分割：1.杭州市淳安县千岛湖镇明珠花园86幢2单元506室房屋有千岛湖镇农商银行贷款60万元(甲方已偿还)，该债务各承担30万元，从上述房产转让后的转让款中扣除。2.夫妻双方各自经手的债务各自偿还，与对方无涉。双方签署离婚协议后，原告为偿还债务于2020年3月1日向李小红借款32万元。由于没有及时偿还，李小红于2020年3月24日向苍南法院申请将原、被告所有的涉案房屋采取保全，本院于2020年3月24日作出（2020）浙0627财保38号民事裁定书将涉案房屋进行保全。原告通过第三方将涉案房屋转让后支付给李小红借款利息3778元、保全费2150元、保险公司保函费752元、律师费5000元，其他费用3000元等合计14680元。原告通过中介将涉案房屋转让他人于2020年4月26日与承租人提前解除租赁合同退还租金8000元、物业费500元、押金3000元、中介费2000元，合计13500元。上述两项费用合计28180元。以上事实有原告提供身份证、离婚协议书、证明、借条、裁定书、委托书及双方当事人在法庭上的陈述等在案佐证，可以证明原、被告办理协议离婚及财产分割的事实，本院予以确认。
本院认为，原、被告签订《离婚协议书》系双方自愿签订，没有证据表明存在欺诈、胁迫的情形，系当事人真实意思表示，离婚协议中关于当事人因离婚就财产分割达成的协议，协议内容不违反法律强制性规定，对双方具有法律约束力，应当得到保护。本案中，原告依离婚协议将转让涉案房屋所得款项依协议约定双方进行平等分割。根据《中华人民共和国婚姻法》第十七条第二款的规定，“夫妻对共同所有的财产，有平等的处理权。”的规定与公平原则，本案原告将涉案房屋转让他人由此产生的一切费用，应由原、被告共同承担。据此，原告要求被告承担利息3778元、保全费2150元、退还租金8000元、物业费500元、押金3000元、中介费2000元，合计19428元，原告要求被告承担一半的理由成立，本院予以支持。但原告支付保险公司保函费752元、律师费5000元，其他费用3000元不是属于必要的合理费用，原告要求被告承担，理由不能成立，本院不予支持。被告以原告支付相关费用不知情与离婚协议约定“夫妻双方各自经手的债务各自偿还”为由不同意承担。本院认为，被告陈述原告告诉她是从杭州一个朋友周转32万元，支付中介费用2000元是事实，可以说明被告是完全清楚原告将涉案房屋转让他人所产生的一切费用。且该费用不是夫妻存续期间各自经手的债务，是基于转让夫妻共同财产所产生的必要合理开支。因此，被告辩称不需要承担的理由不能成立，本院不予采纳。依照《中华人民共和国合同法》第六十条，《中华人民共和国婚姻法》第十七条第二款、第三十九条，《最高人民法院关于适用〈中华人民共和国婚姻法〉若干问题的解释（二）》第八条之规定，判决如下：
限黄小眉于本判决生效后10日内支付给郑有喜9714元。
如果未按判决指定的期间履行给付金钱义务，应当依照《中华人民共和国民事诉讼法》第二百五十三条之规定，加倍支付迟延履行期间的债务利息。
案件受理费152元，减半收取76元，由黄小眉负担38元，郑有喜负担38元。
如不服本判决，可在判决书送达之日起十五日内向本院递交上诉状，并按对方当事人的人数提出副本，上诉于浙江省温州市中级人民法院。
审　判　员　　章华树
二〇二〇年十一月十六日
代　书记员　　兰海燕



相关法律条文链接
《中华人民共和国婚姻法》
第十七条……
夫妻对共同所有的财产，有平等的处理权。
第三十九条　离婚时，夫妻的共同财产由双方协议处理；协议不成时，由人民法院根据财产的具体情况，照顾子女和女方权益的原则判决。
《中华人民共和国合同法》
第六十条　当事人应当按照约定全面履行自己的义务。
当事人应当遵循诚实信用原则，根据合同的性质、目的和交易习惯履行通知、协助、保密等义务。
《中华人民共和国民事诉讼法》
第二百五十三条被执行人未按判决、裁定和其他法律文书指定的期间履行给付金钱义务的，应当加倍支付迟延履行期间的债务利息。被执行人未按判决、裁定和其他法律文书指定的期间履行其他义务的，应当支付迟延履行金。
最高人民法院关于适用《中华人民共和国婚姻法》若干问题的解释（二）
第八条　离婚协议中关于财产分割的条款或者当事人因离婚就财产分割达成的协议，对男女双方具有法律约束力。
当事人因履行上述财产分割协议发生纠纷提起诉讼的，人民法院应当受理。
附文：
一、不履行裁判惩戒后果警示
1. 【追究刑事责任告知】义务人拒不报告财产、虚假报告财产、违反限制消费令，义务人或其他相关人员拒不腾退涉案房屋、土地，或具有非法处置查封、扣押、冻结的财产、虚假诉讼、拒不交出执行标的或财产等抗拒执行行为的，法院将视情予以罚款、拘留；情节严重的，移送公安机关追究刑事责任。权利人在一定条件下，可以自诉追究行为人的刑事责任。
2．【报告财产义务、拒不履行后果告知】执行期间，义务人必须向执行法院如实报告财产，拒不报告又不履行的，法院将视情节轻重采取纳入失信名单、限制出入境、罚款、拘留等措施；义务人报告财产不实的，法院将予以罚款、拘留；单位为被执行人，可视情同时对该单位的法定代表人、主要负责人、影响债务履行的直接责任人员、实际控制人予以罚款、拘留。
3.【交付车辆义务告知】义务人应当将名下的车辆等动产移交执行法院。拒不移交的，法院将予以罚款、拘留；确有正当理由无法移交的，义务人应当向执行法院书面报告车辆等动产的权属和占有、使用等情况。
4．【限制消费、强制执行措施告知】案件立案执行后，人民法院将对义务人采取限制高消费及非生活或者经营必需的有关消费措施（含禁止乘坐飞机、G字头高铁、在星级以上酒店消费、旅游度假、子女就读高收费私立学校等），并有权对义务人的财产采取查封、扣押、冻结、拍卖、变卖等强制性措施。
5．【特殊身份执行措施告知】义务人具有中共党员、人大代表、政协委员、公职人员等特殊身份，执行立案后拒不履行义务的，人民法院将向其所在单位及纪律监察部门、组织人事部门通报失信行为，并严格采取惩戒、制裁措施。
6．【迟延履行债务利息、执行费用告知】案件立案执行后，义务人除应当履行生效法律文书确定的债务外，还需加倍支付迟延履行期间的债务利息或迟延履行金，直至债务清偿完毕之日止，并应承担执行费和因执行程序产生的申请执行费、评估费、保管费等。
7．【强制执行信用污点告知】义务人未在法律文书确定的期限内自动履行，一旦案件立案执行，义务人的被执行信息将成为信用污点，并被人民银行征信系统、各级信用信息平台记录在案。
二、执行风险告知
1．【申请保全、提供线索告知】权利人在诉讼过程中可以申请对义务人的财产采取保全措施，并尽可能地调查了解义务人的财产状况以及下落情况，积极向法院提供义务人的财产、下落线索，以提高财产保全和送达效率，提升生效法律文书的实际执行效果。
2．【申请破产权利告知】权利人发现企业法人不能清偿到期债务，且资产不足以清偿全部债务或者明显缺乏清偿能力的，可以直接向企业住所地法院提出破产重整或者破产清算的申请。
3．【权利人申请执行期限告知】义务人未按期履行生效法律文书确定内容的，权利人应在法律文书生效之日或法律文书确定的履行期限届满之日起两年内向人民法院申请执行。
4．【执行不能风险告知】申请执行具有执行风险，权利人应当有执行风险意识。人民法院依照法定程序执行，如义务人已丧失履行法律文书确定义务的能力，且权利人又无法对义务人进行财产举证，将可能导致案件无法执行到位。这种后果是法院与权利人都不愿意发生的，但这是当事人商业风险、交易风险在执行阶段的继续，权利人应知悉并理解此类执行不能的风险。
注：义务人是指应当履行生效法律文书内容的债务人、被执行人；权利人是指享有生效法律文书赋予权利的债权人、申请执行人。

- 10 -

- 9 -
""",
          "caseName" : "（2020）浙0327民初5117号",
          "caseType" : "57",
          "fileName" : "2020-5117郑有喜离婚后财产纠纷判决书.doc",
          "id" : 1691,
          "title" : "浙江省苍南县人民法院"
}
GET long_text_hight_index/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "caseContext": "债务由各自享"
          }
        }
      ]
    }
  },
  "highlight": {
    "boundary_scanner_locale": "zh_CN",
    "fragment_size": 100,
    "number_of_fragments": 6, 
    "fields": {
      "caseContext": {
        "pre_tags": [
          "<em1>"
        ],
        "post_tags": [
          "</em1>"
        ]
      }
    }
  },
  "size": 1
}
```

